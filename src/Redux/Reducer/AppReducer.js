import { getLoginForHeaderThunkCreater } from "./LoginAythReducer";
////////////////////////////////////////////////////////////////////////////////// <const>
const SET_INITIALIZED = 'appReducer/SET_INITIALIZED';
////////////////////////////////////////////////////////////////////////////////// </const>

////////////////////////////////////////////////////////////////////////////////// <initialState>
let initialState = {
    initialized: false
};
////////////////////////////////////////////////////////////////////////////////// </initialState>

////////////////////////////////////////////////////////////////////////////////// <appReducer>
const appReducer = (state = initialState, action) => {
    switch(action.type) {
        case SET_INITIALIZED:
            return {
                ...state,
                initialized: true
            };
        default:
            return state;
    }
};
////////////////////////////////////////////////////////////////////////////////// </appReducer>

////////////////////////////////////////////////////////////////////////////////// <AC>
export const initializedSuccess = () => ({ type: SET_INITIALIZED });
////////////////////////////////////////////////////////////////////////////////// </AC>

////////////////////////////////////////////////////////////////////////////////// <ThunkCreater>
export let initializedThunkCreater = () => {
    return (dispatch) => {
        let promise = dispatch( getLoginForHeaderThunkCreater() );
        Promise.all([promise]).then( () => {
            dispatch( initializedSuccess() );
        });
    };
};
////////////////////////////////////////////////////////////////////////////////// </ThunkCreater>
 

export default appReducer;